# 目标
数据的合理分类，结构化存储，易扩展，易计算，易展示  

# 设计理念  
* 不追求数据的实时性，一般来说，只重视日线级别的数据，因为超短线交易不适合99%以上的人;  
* 追求数据的全面性，交易标的的选取应该是多维度的，具有中长线翻倍潜力的，多维度的意思是:  
  纵向:技术指标，财务指标，图表分析  
  横向:行业对比，跨市场，跨品种，互相印证，寻找最好的机会;  

* 提供条件告警功能，不提供交易接口，对于能够抵抗日内波动的中长线投资，交易频率较低，无需交易接口，手撸即可;  

# 数据分类
1. security(交易标的)  
stock  
future  
bond  
分为
  * 交易数据  
    * 基础数据:tick  
    * 生成数据:k线，均线，macd等技术指标
  * 基本面数据  
    * 基础数据:  
      stock->资产负债表,利润表，现金流量表  
      future->商品库存，生产成本  
      bond->借贷方的现金流
    * 生成数据:  
      stock->PE,PB,流动比率等  
      future->
  * 消息面数据  
    * 业绩预告  
    * 概念  　

  可以对基础数据和生成数据进行任意计算，从而生成自己需要的数据
2. 宏观数据  
gdp cpi pmi等  
房价 房屋成交量  

# 数据结构
1. security结构    
  * code  
    习惯称呼，比如000338指的是潍柴动力，但在整个市场里面这个标识不一定唯一，比如某些基金代码可能跟某些股票代码一样
  * exchange  
    所属交易所  
  * type  
    证券的类型,可选值:stock,future
  * id  
      对于交易标的，有一个全局唯一的id  
      id = exchange_type_code
2. k线结构  
  * 前复权，后复权，不复权  
    三种类别都需要存储，前复权方便从现在的角度去选股，而对于持仓市值的变化需要用后复权去计算。  
  * 默认存储日线级别,其他级别可以根据tick进行计算  
  * 一个标的一个索引  
# 技术选型
* 数据库(存储)
本质上，所有数据都是时间强相关的，所以时间索引是必须的;从回测和实时交易的角度，数据应该是时间有序的;  
结论:  
一般时间相关的数据存es,这种数据作为选股或者交易辅助，能够通过指定时间，快速查询，包括原始数据和一些经过复杂计算得到的数据。  
tick和k线数据存kafka,可快速进行消费(回测，交易)  
交易框架可以以kafka为基础，对相应级别的k线数据或者tick数据进行消费,然后使用时间相关函数查询指标， 进行交易  
也可以使用时间相关函数进行计算， 产生交易信号， 再去消费行情数据  

* 计算框架  
在kafka存储行情数据的前提下，可以对其进行相应计算，从而产生相应指标，该类指标称为技术指标，可以将其存储到es;  
es存储的相应数据也可以进行再加工，并进行存储;  

* 监控

# 架构图
1.为了最大的灵活性，以文件(json,csv等)的形式存储历史数据，并提供脚本对其进行结构化(to kafka,es);在历史数据校验ok后，实时数据的生成同事落文件和数据库  
2.  
# 问题　　
* 数据源?  
爬虫(新浪财经,东方财富等),UGC,人工录入, 购买
* 数据完整性算法  
* 需要存文件作为中间状态吗？  
对于实时性要求高的，不适合存文件；
对于结构固定的历史数据，可以存文件。　　
爬数据存文件可以不依赖kafka，但提供脚本来结构化数据:
file->kafka->flink->elastic search

#  能做什么？
在全市场，多维度的视角下
* 快速生成自己需要的数据，并提供统一的访问接口和图表展示  
* 自定义监控和告警  
* 灵活的交易策略和回测  
* 云平台下大数据，AI能力
* 垂直搜索,能回答此类问题：中国2017年融资额，A股分红最多的公司
